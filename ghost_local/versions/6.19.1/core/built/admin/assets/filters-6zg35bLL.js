import{r as n,bQ as at,j as t,bR as ce,at as ie,cl as st,cm as nt,cn as lt,co as ot,y as V,cp as it,an as q,cq as _e,cr as Ie,cs as ut,ct as Ve,X as De,bE as ct,ap as dt,bF as pt,bG as mt,$ as te,cu as vt,b$ as ft,c0 as ht,c1 as xt}from"./index-Bgo4hw-T.js";import{L as Ee,c as gt}from"./message-square-text-DzuHB7uU.js";var Re=1,bt=.9,yt=.8,jt=.17,ke=.1,Ce=.999,wt=.9999,Nt=.99,kt=/[\\\/_+.#"@\[\(\{&]/,Ct=/[\\\/_+.#"@\[\(\{&]/g,St=/[\s-]/,Me=/[\s-]/g;function Fe(e,a,r,u,o,m,h){if(m===a.length)return o===e.length?Re:Nt;var v=`${o},${m}`;if(h[v]!==void 0)return h[v];for(var y=u.charAt(m),f=r.indexOf(y,o),p=0,C,E,N,I;f>=0;)C=Fe(e,a,r,u,f+1,m+1,h),C>p&&(f===o?C*=Re:kt.test(e.charAt(f-1))?(C*=yt,N=e.slice(o,f-1).match(Ct),N&&o>0&&(C*=Math.pow(Ce,N.length))):St.test(e.charAt(f-1))?(C*=bt,I=e.slice(o,f-1).match(Me),I&&o>0&&(C*=Math.pow(Ce,I.length))):(C*=jt,o>0&&(C*=Math.pow(Ce,f-o))),e.charAt(f)!==a.charAt(m)&&(C*=wt)),(C<ke&&r.charAt(f-1)===u.charAt(m+1)||u.charAt(m+1)===u.charAt(m)&&r.charAt(f-1)!==u.charAt(m))&&(E=Fe(e,a,r,u,f+1,m+2,h),E*ke>C&&(C=E*ke)),C>p&&(p=C),f=r.indexOf(y,f+1);return h[v]=p,p}function Ae(e){return e.toLowerCase().replace(Me," ")}function Et(e,a,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,Fe(e,a,Ae(e),Ae(a),0,0,{})}var Ft=Symbol.for("react.lazy"),ge=at[" use ".trim().toString()];function zt(e){return typeof e=="object"&&e!==null&&"then"in e}function qe(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Ft&&"_payload"in e&&zt(e._payload)}function _t(e){const a=It(e),r=n.forwardRef((u,o)=>{let{children:m,...h}=u;qe(m)&&typeof ge=="function"&&(m=ge(m._payload));const v=n.Children.toArray(m),y=v.find($t);if(y){const f=y.props.children,p=v.map(C=>C===y?n.Children.count(f)>1?n.Children.only(null):n.isValidElement(f)?f.props.children:null:C);return t.jsx(a,{...h,ref:o,children:n.isValidElement(f)?n.cloneElement(f,void 0,p):null})}return t.jsx(a,{...h,ref:o,children:m})});return r.displayName=`${e}.Slot`,r}function It(e){const a=n.forwardRef((r,u)=>{let{children:o,...m}=r;if(qe(o)&&typeof ge=="function"&&(o=ge(o._payload)),n.isValidElement(o)){const h=At(o),v=Rt(m,o.props);return o.type!==n.Fragment&&(v.ref=u?ce(u,h):h),n.cloneElement(o,v)}return n.Children.count(o)>1?n.Children.only(null):null});return a.displayName=`${e}.SlotClone`,a}var Vt=Symbol("radix.slottable");function $t(e){return n.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Vt}function Rt(e,a){const r={...a};for(const u in a){const o=e[u],m=a[u];/^on[A-Z]/.test(u)?o&&m?r[u]=(...v)=>{const y=m(...v);return o(...v),y}:o&&(r[u]=o):u==="style"?r[u]={...o,...m}:u==="className"&&(r[u]=[o,m].filter(Boolean).join(" "))}return{...e,...r}}function At(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=a&&"isReactWarning"in a&&a.isReactWarning;return r?e.ref:(a=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Ot=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],H=Ot.reduce((e,a)=>{const r=_t(`Primitive.${a}`),u=n.forwardRef((o,m)=>{const{asChild:h,...v}=o,y=h?r:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(y,{...v,ref:m})});return u.displayName=`Primitive.${a}`,{...e,[a]:u}},{}),pe='[cmdk-group=""]',Se='[cmdk-group-items=""]',Pt='[cmdk-group-heading=""]',Ke='[cmdk-item=""]',Oe=`${Ke}:not([aria-disabled="true"])`,ze="cmdk-item-select",ne="data-value",Tt=(e,a,r)=>Et(e,a,r),We=n.createContext(void 0),ve=()=>n.useContext(We),Be=n.createContext(void 0),$e=()=>n.useContext(Be),Ue=n.createContext(void 0),Ge=n.forwardRef((e,a)=>{let r=le(()=>{var l,j;return{search:"",value:(j=(l=e.value)!=null?l:e.defaultValue)!=null?j:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),u=le(()=>new Set),o=le(()=>new Map),m=le(()=>new Map),h=le(()=>new Set),v=Ze(e),{label:y,children:f,value:p,onValueChange:C,filter:E,shouldFilter:N,loop:I,disablePointerSelection:d=!1,vimBindings:x=!0,...g}=e,_=ie(),O=ie(),c=ie(),z=n.useRef(null),F=Ht();re(()=>{if(p!==void 0){let l=p.trim();r.current.value=l,$.emit()}},[p]),re(()=>{F(6,U)},[]);let $=n.useMemo(()=>({subscribe:l=>(h.current.add(l),()=>h.current.delete(l)),snapshot:()=>r.current,setState:(l,j,S)=>{var s,i,b,k;if(!Object.is(r.current[l],j)){if(r.current[l]=j,l==="search")L(),X(),F(1,Y);else if(l==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let w=document.getElementById(c);w?w.focus():(s=document.getElementById(_))==null||s.focus()}if(F(7,()=>{var w;r.current.selectedItemId=(w=T())==null?void 0:w.id,$.emit()}),S||F(5,U),((i=v.current)==null?void 0:i.value)!==void 0){let w=j??"";(k=(b=v.current).onValueChange)==null||k.call(b,w);return}}$.emit()}},emit:()=>{h.current.forEach(l=>l())}}),[]),K=n.useMemo(()=>({value:(l,j,S)=>{var s;j!==((s=m.current.get(l))==null?void 0:s.value)&&(m.current.set(l,{value:j,keywords:S}),r.current.filtered.items.set(l,se(j,S)),F(2,()=>{X(),$.emit()}))},item:(l,j)=>(u.current.add(l),j&&(o.current.has(j)?o.current.get(j).add(l):o.current.set(j,new Set([l]))),F(3,()=>{L(),X(),r.current.value||Y(),$.emit()}),()=>{m.current.delete(l),u.current.delete(l),r.current.filtered.items.delete(l);let S=T();F(4,()=>{L(),S?.getAttribute("id")===l&&Y(),$.emit()})}),group:l=>(o.current.has(l)||o.current.set(l,new Set),()=>{m.current.delete(l),o.current.delete(l)}),filter:()=>v.current.shouldFilter,label:y||e["aria-label"],getDisablePointerSelection:()=>v.current.disablePointerSelection,listId:_,inputId:c,labelId:O,listInnerRef:z}),[]);function se(l,j){var S,s;let i=(s=(S=v.current)==null?void 0:S.filter)!=null?s:Tt;return l?i(l,r.current.search,j):0}function X(){if(!r.current.search||v.current.shouldFilter===!1)return;let l=r.current.filtered.items,j=[];r.current.filtered.groups.forEach(s=>{let i=o.current.get(s),b=0;i.forEach(k=>{let w=l.get(k);b=Math.max(w,b)}),j.push([s,b])});let S=z.current;J().sort((s,i)=>{var b,k;let w=s.getAttribute("id"),R=i.getAttribute("id");return((b=l.get(R))!=null?b:0)-((k=l.get(w))!=null?k:0)}).forEach(s=>{let i=s.closest(Se);i?i.appendChild(s.parentElement===i?s:s.closest(`${Se} > *`)):S.appendChild(s.parentElement===S?s:s.closest(`${Se} > *`))}),j.sort((s,i)=>i[1]-s[1]).forEach(s=>{var i;let b=(i=z.current)==null?void 0:i.querySelector(`${pe}[${ne}="${encodeURIComponent(s[0])}"]`);b?.parentElement.appendChild(b)})}function Y(){let l=J().find(S=>S.getAttribute("aria-disabled")!=="true"),j=l?.getAttribute(ne);$.setState("value",j||void 0)}function L(){var l,j,S,s;if(!r.current.search||v.current.shouldFilter===!1){r.current.filtered.count=u.current.size;return}r.current.filtered.groups=new Set;let i=0;for(let b of u.current){let k=(j=(l=m.current.get(b))==null?void 0:l.value)!=null?j:"",w=(s=(S=m.current.get(b))==null?void 0:S.keywords)!=null?s:[],R=se(k,w);r.current.filtered.items.set(b,R),R>0&&i++}for(let[b,k]of o.current)for(let w of k)if(r.current.filtered.items.get(w)>0){r.current.filtered.groups.add(b);break}r.current.filtered.count=i}function U(){var l,j,S;let s=T();s&&(((l=s.parentElement)==null?void 0:l.firstChild)===s&&((S=(j=s.closest(pe))==null?void 0:j.querySelector(Pt))==null||S.scrollIntoView({block:"nearest"})),s.scrollIntoView({block:"nearest"}))}function T(){var l;return(l=z.current)==null?void 0:l.querySelector(`${Ke}[aria-selected="true"]`)}function J(){var l;return Array.from(((l=z.current)==null?void 0:l.querySelectorAll(Oe))||[])}function D(l){let j=J()[l];j&&$.setState("value",j.getAttribute(ne))}function M(l){var j;let S=T(),s=J(),i=s.findIndex(k=>k===S),b=s[i+l];(j=v.current)!=null&&j.loop&&(b=i+l<0?s[s.length-1]:i+l===s.length?s[0]:s[i+l]),b&&$.setState("value",b.getAttribute(ne))}function Q(l){let j=T(),S=j?.closest(pe),s;for(;S&&!s;)S=l>0?Gt(S,pe):Zt(S,pe),s=S?.querySelector(Oe);s?$.setState("value",s.getAttribute(ne)):M(l)}let W=()=>D(J().length-1),de=l=>{l.preventDefault(),l.metaKey?W():l.altKey?Q(1):M(1)},he=l=>{l.preventDefault(),l.metaKey?D(0):l.altKey?Q(-1):M(-1)};return n.createElement(H.div,{ref:a,tabIndex:-1,...g,"cmdk-root":"",onKeyDown:l=>{var j;(j=g.onKeyDown)==null||j.call(g,l);let S=l.nativeEvent.isComposing||l.keyCode===229;if(!(l.defaultPrevented||S))switch(l.key){case"n":case"j":{x&&l.ctrlKey&&de(l);break}case"ArrowDown":{de(l);break}case"p":case"k":{x&&l.ctrlKey&&he(l);break}case"ArrowUp":{he(l);break}case"Home":{l.preventDefault(),D(0);break}case"End":{l.preventDefault(),W();break}case"Enter":{l.preventDefault();let s=T();if(s){let i=new Event(ze);s.dispatchEvent(i)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:K.inputId,id:K.labelId,style:Yt},y),Ne(e,l=>n.createElement(Be.Provider,{value:$},n.createElement(We.Provider,{value:K},l))))}),Lt=n.forwardRef((e,a)=>{var r,u;let o=ie(),m=n.useRef(null),h=n.useContext(Ue),v=ve(),y=Ze(e),f=(u=(r=y.current)==null?void 0:r.forceMount)!=null?u:h?.forceMount;re(()=>{if(!f)return v.item(o,h?.id)},[f]);let p=He(o,m,[e.value,e.children,m],e.keywords),C=$e(),E=Z(F=>F.value&&F.value===p.current),N=Z(F=>f||v.filter()===!1?!0:F.search?F.filtered.items.get(o)>0:!0);n.useEffect(()=>{let F=m.current;if(!(!F||e.disabled))return F.addEventListener(ze,I),()=>F.removeEventListener(ze,I)},[N,e.onSelect,e.disabled]);function I(){var F,$;d(),($=(F=y.current).onSelect)==null||$.call(F,p.current)}function d(){C.setState("value",p.current,!0)}if(!N)return null;let{disabled:x,value:g,onSelect:_,forceMount:O,keywords:c,...z}=e;return n.createElement(H.div,{ref:ce(m,a),...z,id:o,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!E,"data-disabled":!!x,"data-selected":!!E,onPointerMove:x||v.getDisablePointerSelection()?void 0:d,onClick:x?void 0:I},e.children)}),Dt=n.forwardRef((e,a)=>{let{heading:r,children:u,forceMount:o,...m}=e,h=ie(),v=n.useRef(null),y=n.useRef(null),f=ie(),p=ve(),C=Z(N=>o||p.filter()===!1?!0:N.search?N.filtered.groups.has(h):!0);re(()=>p.group(h),[]),He(h,v,[e.value,e.heading,y]);let E=n.useMemo(()=>({id:h,forceMount:o}),[o]);return n.createElement(H.div,{ref:ce(v,a),...m,"cmdk-group":"",role:"presentation",hidden:C?void 0:!0},r&&n.createElement("div",{ref:y,"cmdk-group-heading":"","aria-hidden":!0,id:f},r),Ne(e,N=>n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?f:void 0},n.createElement(Ue.Provider,{value:E},N))))}),Mt=n.forwardRef((e,a)=>{let{alwaysRender:r,...u}=e,o=n.useRef(null),m=Z(h=>!h.search);return!r&&!m?null:n.createElement(H.div,{ref:ce(o,a),...u,"cmdk-separator":"",role:"separator"})}),qt=n.forwardRef((e,a)=>{let{onValueChange:r,...u}=e,o=e.value!=null,m=$e(),h=Z(f=>f.search),v=Z(f=>f.selectedItemId),y=ve();return n.useEffect(()=>{e.value!=null&&m.setState("search",e.value)},[e.value]),n.createElement(H.input,{ref:a,...u,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":y.listId,"aria-labelledby":y.labelId,"aria-activedescendant":v,id:y.inputId,type:"text",value:o?e.value:h,onChange:f=>{o||m.setState("search",f.target.value),r?.(f.target.value)}})}),Kt=n.forwardRef((e,a)=>{let{children:r,label:u="Suggestions",...o}=e,m=n.useRef(null),h=n.useRef(null),v=Z(f=>f.selectedItemId),y=ve();return n.useEffect(()=>{if(h.current&&m.current){let f=h.current,p=m.current,C,E=new ResizeObserver(()=>{C=requestAnimationFrame(()=>{let N=f.offsetHeight;p.style.setProperty("--cmdk-list-height",N.toFixed(1)+"px")})});return E.observe(f),()=>{cancelAnimationFrame(C),E.unobserve(f)}}},[]),n.createElement(H.div,{ref:ce(m,a),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":v,"aria-label":u,id:y.listId},Ne(e,f=>n.createElement("div",{ref:ce(h,y.listInnerRef),"cmdk-list-sizer":""},f)))}),Wt=n.forwardRef((e,a)=>{let{open:r,onOpenChange:u,overlayClassName:o,contentClassName:m,container:h,...v}=e;return n.createElement(st,{open:r,onOpenChange:u},n.createElement(nt,{container:h},n.createElement(lt,{"cmdk-overlay":"",className:o}),n.createElement(ot,{"aria-label":e.label,"cmdk-dialog":"",className:m},n.createElement(Ge,{ref:a,...v}))))}),Bt=n.forwardRef((e,a)=>Z(r=>r.filtered.count===0)?n.createElement(H.div,{ref:a,...e,"cmdk-empty":"",role:"presentation"}):null),Ut=n.forwardRef((e,a)=>{let{progress:r,children:u,label:o="Loading...",...m}=e;return n.createElement(H.div,{ref:a,...m,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},Ne(e,h=>n.createElement("div",{"aria-hidden":!0},h)))}),ae=Object.assign(Ge,{List:Kt,Item:Lt,Input:qt,Group:Dt,Separator:Mt,Dialog:Wt,Empty:Bt,Loading:Ut});function Gt(e,a){let r=e.nextElementSibling;for(;r;){if(r.matches(a))return r;r=r.nextElementSibling}}function Zt(e,a){let r=e.previousElementSibling;for(;r;){if(r.matches(a))return r;r=r.previousElementSibling}}function Ze(e){let a=n.useRef(e);return re(()=>{a.current=e}),a}var re=typeof window>"u"?n.useEffect:n.useLayoutEffect;function le(e){let a=n.useRef();return a.current===void 0&&(a.current=e()),a}function Z(e){let a=$e(),r=()=>e(a.snapshot());return n.useSyncExternalStore(a.subscribe,r,r)}function He(e,a,r,u=[]){let o=n.useRef(),m=ve();return re(()=>{var h;let v=(()=>{var f;for(let p of r){if(typeof p=="string")return p.trim();if(typeof p=="object"&&"current"in p)return p.current?(f=p.current.textContent)==null?void 0:f.trim():o.current}})(),y=u.map(f=>f.trim());m.value(e,v,y),(h=a.current)==null||h.setAttribute(ne,v),o.current=v}),o}var Ht=()=>{let[e,a]=n.useState(),r=le(()=>new Map);return re(()=>{r.current.forEach(u=>u()),r.current=new Map},[e]),(u,o)=>{r.current.set(u,o),a({})}};function Xt(e){let a=e.type;return typeof a=="function"?a(e.props):"render"in a?a.render(e.props):e}function Ne({asChild:e,children:a},r){return e&&n.isValidElement(a)?n.cloneElement(Xt(a),{ref:a.ref},r(a.props.children)):r(a)}var Yt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function be({className:e,...a}){return t.jsx(ae,{className:V("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...a})}function ye({className:e,...a}){return t.jsxs("div",{className:"flex items-center border-b border-border px-3","cmdk-input-wrapper":"","data-slot":"command-input",children:[t.jsx(it,{className:"me-2 size-4 shrink-0 opacity-50"}),t.jsx(ae.Input,{className:V("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-hidden text-foreground placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...a})]})}function je({className:e,...a}){return t.jsx(ae.List,{className:V("max-h-[300px] p-1 overflow-y-auto overflow-x-hidden",e),"data-slot":"command-list",...a})}function we({...e}){return t.jsx(ae.Empty,{className:"py-6 text-center text-sm","data-slot":"command-empty",...e})}function G({className:e,...a}){return t.jsx(ae.Group,{className:V("overflow-hidden p-1.5 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),"data-slot":"command-group",...a})}function ue({className:e,...a}){return t.jsx(ae.Separator,{className:V("-mx-1.5 h-px bg-border",e),"data-slot":"command-separator",...a})}function B({className:e,...a}){return t.jsx(ae.Item,{className:V("relative flex text-foreground cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-hidden data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0","[&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 [&_svg]:stroke-[1.5px]",e),"data-slot":"command-item",...a})}const oe={addFilter:"",clearFilters:"Clear",searchFields:"Search fields...",noFieldsFound:"No fields found.",noResultsFound:"No results found.",loading:"Loading...",select:"Select...",true:"True",false:"False",min:"Min",max:"Max",to:"to",typeAndPressEnter:"Type and press Enter to add tag",selected:"selected",selectedCount:"selected",percent:"%",defaultCurrency:"$",defaultColor:"#000000",addFilterTitle:"",operators:{is:"is",isNot:"is not",isAnyOf:"is any of",isNotAnyOf:"is not any of",includesAll:"includes all",excludesAll:"excludes all",before:"before",after:"after",between:"between",notBetween:"not between",contains:"contains",notContains:"does not contain",startsWith:"starts with",endsWith:"ends with",isExactly:"is exactly",equals:"equals",notEquals:"not equals",greaterThan:"greater than",lessThan:"less than",overlaps:"overlaps",includes:"includes",excludes:"excludes",includesAllOf:"includes all of",includesAnyOf:"includes any of",empty:"is empty",notEmpty:"is not empty"},placeholders:{enterField:e=>`Enter ${e}...`,selectField:"Select...",searchField:e=>`Search ${e.toLowerCase()}...`,enterKey:"Enter key...",enterValue:"Enter value..."},helpers:{formatOperator:e=>e.replace(/_/g," ")},validation:{invalidEmail:"Invalid email format",invalidUrl:"Invalid URL format",invalidTel:"Invalid phone format",invalid:"Invalid input format"}},Xe=n.createContext({variant:"outline",size:"md",radius:"md",i18n:oe,cursorPointer:!0,className:void 0,showAddButton:!0,addButtonText:void 0,addButtonIcon:void 0,addButtonClassName:void 0,addButton:void 0,showSearchInput:!0,trigger:void 0,allowMultiple:!0}),fe=()=>n.useContext(Xe),Jt=q(["relative flex shrink-0 items-center text-foreground outline-none transition","has-[[data-slot=filters-input]:focus-visible]:ring-ring/30","has-[[data-slot=filters-input]:focus-visible]:border-ring","has-[[data-slot=filters-input]:focus-visible]:outline-none","has-[[data-slot=filters-input]:focus-visible]:ring-[3px]","has-[[data-slot=filters-input]:focus-visible]:z-1","has-[[data-slot=filters-input]:[aria-invalid=true]]:border","has-[[data-slot=filters-input]:[aria-invalid=true]]:border-solid","has-[[data-slot=filters-input]:[aria-invalid=true]]:border-destructive/60","has-[[data-slot=filters-input]:[aria-invalid=true]]:ring-destructive/10","dark:has-[[data-slot=filters-input]:[aria-invalid=true]]:border-destructive","dark:has-[[data-slot=filters-input]:[aria-invalid=true]]:ring-destructive/20"],{variants:{variant:{solid:"border-0 bg-secondary",outline:"border border-border bg-background"},size:{lg:"h-10 px-2.5 text-sm has-[[data-slot=filters-prefix]]:ps-0 has-[[data-slot=filters-suffix]]:pe-0",md:"h-[34px] px-2 text-sm has-[[data-slot=filters-prefix]]:ps-0 has-[[data-slot=filters-suffix]]:pe-0",sm:"h-8 px-2 text-xs has-[[data-slot=filters-prefix]]:ps-0 has-[[data-slot=filters-suffix]]:pe-0"},cursorPointer:{true:"cursor-pointer",false:""}},defaultVariants:{variant:"outline",size:"md",cursorPointer:!0}}),Qt=q(["inline-flex shrink-0 items-center justify-center text-muted-foreground transition hover:text-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"],{variants:{variant:{solid:"bg-secondary",outline:"border border-s-0 border-border hover:bg-secondary"},size:{lg:"size-10 [&_svg:not([class*=size-])]:size-4",md:"size-[34px] [&_svg:not([class*=size-])]:size-3.5",sm:"size-8 [&_svg:not([class*=size-])]:size-3"},cursorPointer:{true:"cursor-pointer",false:""},radius:{md:"rounded-e-md",full:"rounded-e-full"}},defaultVariants:{variant:"outline",size:"md",radius:"md",cursorPointer:!0}}),Pe=q(["inline-flex shrink-0 items-center justify-center text-foreground transition","[&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 [&_svg]:stroke-[1.5px]","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"],{variants:{variant:{solid:"border border-input hover:bg-secondary/60",outline:"border border-border hover:bg-accent"},size:{lg:"h-10 gap-1.5 px-4 text-sm [&_svg:not([class*=size-])]:size-4",md:"h-[34px] gap-1.5 px-3 text-sm [&_svg:not([class*=size-])]:size-4",sm:"h-8 gap-1.5 px-2.5 text-xs [&_svg:not([class*=size-])]:size-3.5"},radius:{md:"rounded-md",full:"rounded-full"},cursorPointer:{true:"cursor-pointer",false:""}},defaultVariants:{variant:"outline",size:"md",cursorPointer:!0}}),er=q(["focus-visible:z-1 relative flex shrink-0 items-center whitespace-nowrap text-muted-foreground transition hover:text-foreground data-[state=open]:text-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"],{variants:{variant:{solid:"bg-secondary",outline:"border border-e-0 border-border bg-background hover:bg-secondary data-[state=open]:bg-secondary [&+[data-slot=filters-remove]]:border-s"},size:{lg:"h-10 gap-1.5 px-4 text-sm",md:"h-[34px] gap-0.5 px-3 text-sm",sm:"h-8 gap-1 px-2.5 text-xs"},cursorPointer:{true:"cursor-pointer",false:""}},defaultVariants:{variant:"outline",size:"md",cursorPointer:!0}}),tr=q(["flex shrink-0 items-center gap-1.5 px-1.5 py-1 text-foreground","[&_svg:not([class*=size-])]:size-4"],{variants:{variant:{solid:"bg-secondary",outline:"border border-e-0 border-border"},size:{lg:"h-10 gap-1.5 px-4 text-sm [&_svg:not([class*=size-])]:size-4",md:"h-[34px] gap-1.5 px-3 text-sm [&_svg:not([class*=size-])]:size-4",sm:"h-8 gap-0.5 px-2.5 text-xs [&_svg:not([class*=size-])]:size-3.5"},radius:{md:"rounded-s-md",full:"rounded-s-full"}},defaultVariants:{variant:"outline",size:"md"}}),me=q(["focus-visible:z-1 relative flex min-w-0 shrink items-center gap-1 text-foreground transition","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"],{variants:{variant:{solid:"bg-secondary",outline:"border border-border bg-background hover:bg-secondary has-[[data-slot=switch]]:hover:bg-transparent"},size:{lg:"h-10 gap-1.5 px-4 text-sm [&_svg:not([class*=size-])]:size-4",md:"h-[34px] gap-1.5 px-3 text-sm [&_svg:not([class*=size-])]:size-4",sm:"h-8 gap-0.5 px-2.5 text-xs [&_svg:not([class*=size-])]:size-3.5"},cursorPointer:{true:"cursor-pointer has-[[data-slot=switch]]:cursor-default",false:""}},defaultVariants:{variant:"outline",size:"md",cursorPointer:!0}}),Te=q("flex shrink-0 items-center justify-center text-foreground",{variants:{variant:{solid:"",outline:""},size:{lg:"h-10 px-4 text-sm",md:"h-[34px] px-3 text-sm",sm:"h-8 px-2.5 text-xs"}},defaultVariants:{variant:"outline",size:"md"}}),xe=q("flex shrink-0 items-center text-muted-foreground",{variants:{variant:{solid:"bg-secondary",outline:"border border-x-0 border-border bg-background"},size:{lg:"h-10 px-4 text-sm",md:"h-[34px] px-3 text-sm",sm:"h-8 px-2.5 text-xs"}},defaultVariants:{variant:"outline",size:"md"}}),rr=q("relative flex flex-wrap items-center",{variants:{variant:{solid:"gap-2",outline:""},size:{sm:"gap-1.5",md:"gap-2.5",lg:"gap-3.5"}},defaultVariants:{variant:"outline",size:"md"}}),ar=q("flex max-w-[calc(100vw-32px)] items-center",{variants:{variant:{solid:"gap-px",outline:""}},defaultVariants:{variant:"outline"}});function P({field:e,onChange:a,onBlur:r,onKeyDown:u,onInputChange:o,className:m,...h}){const v=fe(),[y,f]=n.useState(!0),[p,C]=n.useState(""),E=(g,_)=>!_||!g?!0:new RegExp(_).test(g),N=(g,_=!1)=>{if((g==="text"||g==="number")&&_)return v.i18n.validation.invalid;switch(g){case"email":return v.i18n.validation.invalidEmail;case"url":return v.i18n.validation.invalidUrl;case"tel":return v.i18n.validation.invalidTel;default:return v.i18n.validation.invalid}},I=g=>{a?.(g)},d=g=>{const _=g.target.value,O=e?.pattern||h.pattern;if(_&&O){let c=!0;e?.validation?c=e.validation(_):c=E(_,O),f(c);const z=!!(e?.pattern||h.pattern);C(c?"":N(e?.type||"",z))}else f(!0),C("");o&&o(g),r?.(g)},x=g=>{if(!y&&!["Tab","Escape","Enter","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(g.key)&&(f(!0),C("")),g.key==="Enter"&&o){const _={...g,target:g.target,currentTarget:g.currentTarget};o(_)}u?.(g)};return t.jsxs("div",{className:V("w-36",Jt({variant:v.variant,size:v.size}),m),"data-slot":"filters-input-wrapper",children:[e?.prefix&&t.jsx("div",{className:Te({variant:v.variant,size:v.size}),"data-slot":"filters-prefix",children:e.prefix}),t.jsxs("div",{className:"flex w-full items-stretch",children:[t.jsx("input",{"aria-describedby":!y&&p?`${e?.key||"input"}-error`:void 0,"aria-invalid":!y,className:"w-full outline-none","data-slot":"filters-input",onBlur:d,onChange:I,onKeyDown:x,...h}),!y&&p&&t.jsxs(ft,{children:[t.jsx(ht,{asChild:!0,children:t.jsx("div",{className:"absolute right-2 top-1/2 flex -translate-y-1/2 items-center",children:t.jsx(gt,{className:"size-3.5 text-destructive"})})}),t.jsx(xt,{children:t.jsx("p",{className:"text-sm",children:p})})]})]}),e?.suffix&&t.jsx("div",{className:V(Te({variant:v.variant,size:v.size})),"data-slot":"filters-suffix",children:e.suffix})]})}function sr({className:e,icon:a=t.jsx(De,{}),...r}){const u=fe();return t.jsx("button",{className:V(Qt({variant:u.variant,size:u.size,cursorPointer:u.cursorPointer,radius:u.radius}),e),"data-slot":"filters-remove",...r,type:"button",children:a})}const Ye=e=>"fields"in e&&Array.isArray(e.fields),Je=e=>!!(e.group&&e.fields),Qe=e=>e.reduce((a,r)=>Ye(r)?[...a,...r.fields]:Je(r)?[...a,...r.fields]:[...a,r],[]),nr=e=>Qe(e).reduce((r,u)=>(u.key&&(r[u.key]=u),r),{}),et=e=>({select:[{value:"is",label:e.operators.is},{value:"is_not",label:e.operators.isNot},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],multiselect:[{value:"is_any_of",label:e.operators.isAnyOf},{value:"is_not_any_of",label:e.operators.isNotAnyOf},{value:"includes_all",label:e.operators.includesAll},{value:"excludes_all",label:e.operators.excludesAll},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],date:[{value:"before",label:e.operators.before},{value:"after",label:e.operators.after},{value:"is",label:e.operators.is},{value:"is_not",label:e.operators.isNot},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],daterange:[{value:"between",label:e.operators.between},{value:"not_between",label:e.operators.notBetween},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],text:[{value:"contains",label:e.operators.contains},{value:"not_contains",label:e.operators.notContains},{value:"starts_with",label:e.operators.startsWith},{value:"ends_with",label:e.operators.endsWith},{value:"is",label:e.operators.isExactly},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],number:[{value:"equals",label:e.operators.equals},{value:"not_equals",label:e.operators.notEquals},{value:"greater_than",label:e.operators.greaterThan},{value:"less_than",label:e.operators.lessThan},{value:"between",label:e.operators.between},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],numberrange:[{value:"between",label:e.operators.between},{value:"overlaps",label:e.operators.overlaps},{value:"contains",label:e.operators.contains},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],boolean:[{value:"is",label:e.operators.is},{value:"is_not",label:e.operators.isNot},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],email:[{value:"contains",label:e.operators.contains},{value:"not_contains",label:e.operators.notContains},{value:"starts_with",label:e.operators.startsWith},{value:"ends_with",label:e.operators.endsWith},{value:"is",label:e.operators.isExactly},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],url:[{value:"contains",label:e.operators.contains},{value:"not_contains",label:e.operators.notContains},{value:"starts_with",label:e.operators.startsWith},{value:"ends_with",label:e.operators.endsWith},{value:"is",label:e.operators.isExactly},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],tel:[{value:"contains",label:e.operators.contains},{value:"not_contains",label:e.operators.notContains},{value:"starts_with",label:e.operators.startsWith},{value:"ends_with",label:e.operators.endsWith},{value:"is",label:e.operators.isExactly},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],time:[{value:"before",label:e.operators.before},{value:"after",label:e.operators.after},{value:"is",label:e.operators.is},{value:"between",label:e.operators.between},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}],datetime:[{value:"before",label:e.operators.before},{value:"after",label:e.operators.after},{value:"is",label:e.operators.is},{value:"between",label:e.operators.between},{value:"empty",label:e.operators.empty},{value:"not_empty",label:e.operators.notEmpty}]});et(oe);const lr=(e,a,r)=>{if(e.operators)return e.operators;const u=et(r);let o=e.type||"select";return o==="select"&&a.length>1&&(o="multiselect"),o==="multiselect"||e.type==="multiselect"?u.multiselect:u[o]||u.select};function or({field:e,operator:a,values:r,onChange:u}){var o;const m=fe(),h=lr(e,r,m.i18n),v=((o=h.find(y=>y.value===a))==null?void 0:o.label)||m.i18n.helpers.formatOperator(a);return e.hideOperatorSelect?t.jsx("div",{className:"flex items-center self-stretch whitespace-nowrap border border-r-[0px] px-3 text-sm text-muted-foreground",children:v}):t.jsxs(ct,{children:[t.jsx(dt,{className:er({variant:m.variant,size:m.size}),children:v}),t.jsx(pt,{align:"start",className:"w-fit min-w-fit",children:h.map(y=>t.jsxs(mt,{className:"flex items-center justify-between",onClick:()=>u(y.value),children:[t.jsx("span",{children:y.label}),t.jsx(te,{className:`ms-auto text-primary ${y.value===a?"opacity-100":"opacity-0"}`})]},y.value))})]})}function tt({field:e,values:a,onChange:r,onClose:u,inline:o=!1}){var m;const[h,v]=n.useState(!1),[y,f]=n.useState(e.searchValue||""),[p,C]=n.useState([]),E=fe();n.useEffect(()=>{e.searchValue!==void 0&&f(e.searchValue)},[e.searchValue]);const N=e.type==="multiselect"||a.length>1,I=(e.value!==void 0?e.value:a)||[];n.useEffect(()=>{h&&e.searchable!==!1&&setTimeout(()=>{const c=document.querySelector("[cmdk-input]");c&&c.focus()},0)},[h,e.searchable]);const d=n.useMemo(()=>{var c;return((c=e.options)==null?void 0:c.filter(z=>I.includes(z.value)))||[]},[e.options,JSON.stringify(I)]);n.useEffect(()=>{if(I.length===0){C([]);return}d.length>0&&C(c=>{const z=[];for(const F of I){const $=d.find(K=>K.value===F)??c.find(K=>K.value===F);$&&z.push($)}return z})},[d,I]);const x=I.length>0?p.length>0?p:d:[],g=((m=e.options)==null?void 0:m.filter(c=>!I.includes(c.value)))||[],_=c=>{var z;f(c),(z=e.onSearchChange)==null||z.call(e,c)},O=()=>{v(!1),e.searchValue===void 0&&setTimeout(()=>f(""),200),u?.()};return o?t.jsx("div",{className:"w-full",children:t.jsxs(be,{children:[e.searchable!==!1&&t.jsx(ye,{className:"h-8.5 text-sm",placeholder:E.i18n.placeholders.searchField(e.label||""),value:y,onValueChange:_}),t.jsxs(je,{className:"outline-none",children:[e.isLoading?t.jsxs("div",{className:"flex items-center justify-center py-6 text-sm text-muted-foreground",children:[t.jsx(Ee,{className:"mr-2 size-4 animate-spin"}),E.i18n.loading]}):t.jsx(we,{children:E.i18n.noResultsFound}),x.length>0&&t.jsx(G,{heading:e.label||"Selected",children:x.map(c=>t.jsxs(B,{className:"group flex items-center gap-2",onSelect:()=>{if(N){const z=I.filter(F=>F!==c.value);e.onValueChange?e.onValueChange(z):r(z)}else e.onValueChange?e.onValueChange([]):r([])},children:[c.icon&&c.icon,t.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.jsx("span",{className:"truncate text-accent-foreground",title:c.label,children:c.label}),c.detail&&t.jsx("span",{className:"truncate text-sm text-muted-foreground",title:c.detail,children:c.detail})]}),t.jsx(te,{className:"ms-auto text-primary"})]},String(c.value)))}),g.length>0&&t.jsxs(t.Fragment,{children:[x.length>0&&t.jsx(ue,{}),t.jsx(G,{children:g.map(c=>t.jsxs(B,{className:"group flex items-center gap-2",value:c.label+(c.detail?` - ${c.detail}`:""),onSelect:()=>{if(N){const z=[...I,c.value];if(e.maxSelections&&z.length>e.maxSelections)return;e.onValueChange?e.onValueChange(z):r(z),e.autoCloseOnSelect&&u?.()}else e.onValueChange?e.onValueChange([c.value]):r([c.value]),u?.()},children:[c.icon&&c.icon,t.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.jsx("span",{className:"truncate text-accent-foreground",title:c.label,children:c.label}),c.detail&&t.jsx("span",{className:"truncate text-sm text-muted-foreground",title:c.detail,children:c.detail})]}),t.jsx(te,{className:"ms-auto text-primary opacity-0"})]},String(c.value)))})]})]})]})}):t.jsxs(_e,{open:h,onOpenChange:c=>{v(c),!c&&e.searchValue===void 0&&setTimeout(()=>f(""),200)},children:[t.jsx(Ie,{className:V(me({variant:E.variant,size:E.size,cursorPointer:E.cursorPointer}),e.triggerClassName??"max-w-[240px]"),children:t.jsx("div",{className:"flex min-w-0 items-center gap-1.5",children:e.customValueRenderer?e.customValueRenderer(a,e.options||[]):t.jsxs(t.Fragment,{children:[x.length>0&&x.some(c=>c.icon)&&t.jsx("div",{className:V("-space-x-0.5 flex shrink-0 items-center",e.selectedOptionsClassName),children:x.slice(0,3).map(c=>t.jsx("div",{children:c.icon},String(c.value)))}),x.length===1?t.jsx("span",{className:"min-w-0 truncate text-accent-foreground",title:x[0].detail?`${x[0].label} - ${x[0].detail}`:x[0].label,children:x[0].label}):x.length>1?`${x.length} ${E.i18n.selectedCount}`:E.i18n.select]})})}),t.jsx(Ve,{align:"start",className:V("p-0 data-[state=closed]:!animation-none data-[state=closed]:!duration-0",e.className||"w-[200px]"),children:t.jsxs(be,{children:[e.searchable!==!1&&t.jsx(ye,{className:"h-[34px] text-sm",placeholder:E.i18n.placeholders.searchField(e.label||""),value:y,onValueChange:_}),t.jsxs(je,{className:"outline-none",children:[e.isLoading?t.jsxs("div",{className:"flex items-center justify-center py-6 text-sm text-muted-foreground",children:[t.jsx(Ee,{className:"mr-2 size-4 animate-spin"}),E.i18n.loading]}):t.jsx(we,{children:E.i18n.noResultsFound}),x.length>0&&t.jsx(G,{children:x.map(c=>t.jsxs(B,{className:"group flex items-center gap-2",onSelect:()=>{r(N?a.filter(z=>z!==c.value):[]),N||(v(!1),O())},children:[c.icon&&c.icon,t.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.jsx("span",{className:"truncate text-accent-foreground",title:c.label,children:c.label}),c.detail&&t.jsx("span",{className:"truncate text-sm text-muted-foreground",title:c.detail,children:c.detail})]}),t.jsx(te,{className:"ms-auto text-primary"})]},String(c.value)))}),g.length>0&&t.jsxs(t.Fragment,{children:[x.length>0&&t.jsx(ue,{}),t.jsx(G,{children:g.map(c=>t.jsxs(B,{className:"group flex items-center gap-2",value:c.label+(c.detail?` - ${c.detail}`:""),onSelect:()=>{if(N){const z=[...a,c.value];if(e.maxSelections&&z.length>e.maxSelections)return;r(z),e.autoCloseOnSelect&&O()}else r([c.value]),v(!1),O()},children:[c.icon&&c.icon,t.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.jsx("span",{className:"truncate text-accent-foreground",title:c.label,children:c.label}),c.detail&&t.jsx("span",{className:"truncate text-sm text-muted-foreground",title:c.detail,children:c.detail})]}),t.jsx(te,{className:"ms-auto text-primary opacity-0"})]},String(c.value)))})]})]})]})})]})}function ir({field:e,values:a,onChange:r,operator:u}){var o,m;const[h,v]=n.useState(!1),[y,f]=n.useState(e.searchValue||""),p=fe();n.useEffect(()=>{e.searchValue!==void 0&&f(e.searchValue)},[e.searchValue]);const C=d=>{var x;f(d),(x=e.onSearchChange)==null||x.call(e,d)};if(n.useEffect(()=>{h&&e.searchable!==!1&&setTimeout(()=>{const d=document.querySelector("[cmdk-input]");d&&d.focus()},0)},[h,e.searchable]),u==="empty"||u==="not_empty")return null;if(e.customRenderer)return t.jsx("div",{className:me({variant:p.variant,size:p.size,cursorPointer:p.cursorPointer}),children:e.customRenderer({field:e,values:a,onChange:r,operator:u})});if(e.type==="boolean"){const d=a[0]===!0,x=e.onLabel||p.i18n.true,g=e.offLabel||p.i18n.false;return t.jsx("div",{className:me({variant:p.variant,size:p.size,cursorPointer:p.cursorPointer}),children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(vt,{checked:d,size:"sm",onCheckedChange:_=>r([_])}),e.onLabel&&e.offLabel&&t.jsx("span",{className:"text-xs text-muted-foreground",children:d?x:g})]})})}if(e.type==="time"){if(u==="between"){const d=a[0]||"",x=a[1]||"";return t.jsxs("div",{className:"flex items-center","data-slot":"filters-item",children:[t.jsx(P,{className:e.className,field:e,type:"time",value:d,onChange:g=>r([g.target.value,x]),onInputChange:e.onInputChange}),t.jsx("div",{className:xe({variant:p.variant,size:p.size}),"data-slot":"filters-between",children:p.i18n.to}),t.jsx(P,{className:e.className,field:e,type:"time",value:x,onChange:g=>r([d,g.target.value]),onInputChange:e.onInputChange})]})}return t.jsx(P,{className:e.className,field:e,type:"time",value:a[0]||"",onChange:d=>r([d.target.value]),onInputChange:e.onInputChange})}if(e.type==="datetime"){if(u==="between"){const d=a[0]||"",x=a[1]||"";return t.jsxs("div",{className:"flex items-center","data-slot":"filters-item",children:[t.jsx(P,{className:V("w-36 max-w-full",e.className),field:e,type:"datetime-local",value:d,onChange:g=>r([g.target.value,x]),onInputChange:e.onInputChange}),t.jsx("div",{className:xe({variant:p.variant,size:p.size}),"data-slot":"filters-between",children:p.i18n.to}),t.jsx(P,{className:V("w-36 max-w-full",e.className),field:e,type:"datetime-local",value:x,onChange:g=>r([d,g.target.value]),onInputChange:e.onInputChange})]})}return t.jsx(P,{className:V("w-36 max-w-full",e.className),field:e,type:"datetime-local",value:a[0]||"",onChange:d=>r([d.target.value]),onInputChange:e.onInputChange})}if(["email","url","tel"].includes(e.type||"")){const d=()=>{switch(e.type){case"email":return"email";case"url":return"url";case"tel":return"tel";default:return"text"}},x=()=>{switch(e.type){case"email":return"^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$";case"url":return"^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)$";case"tel":return"^[\\+]?[1-9][\\d]{0,15}$";default:return}};return t.jsx(P,{className:e.className,field:e,pattern:e.pattern||x(),placeholder:e.placeholder||p.i18n.placeholders.enterField(e.type||"text"),type:d(),value:a[0]||"",onChange:g=>r([g.target.value]),onInputChange:e.onInputChange})}if(e.type==="daterange"){const d=a[0]||"",x=a[1]||"";return t.jsxs("div",{className:me({variant:p.variant,size:p.size,cursorPointer:p.cursorPointer}),children:[t.jsx(P,{className:V("w-24 max-w-full",e.className),field:e,type:"date",value:d,onChange:g=>r([g.target.value,x]),onInputChange:e.onInputChange}),t.jsx("div",{className:xe({variant:p.variant,size:p.size}),"data-slot":"filters-between",children:p.i18n.to}),t.jsx(P,{className:V("w-24 max-w-full",e.className),field:e,type:"date",value:x,onChange:g=>r([d,g.target.value]),onInputChange:e.onInputChange})]})}if(e.type==="text"||e.type==="number"){if(e.type==="number"&&u==="between"){const d=a[0]||"",x=a[1]||"";return t.jsxs("div",{className:"flex items-center","data-slot":"filters-item",children:[t.jsx(P,{className:V("w-16 max-w-full",e.className),field:e,max:e.max,min:e.min,pattern:e.pattern,placeholder:p.i18n.min,step:e.step,type:"number",value:d,onChange:g=>r([g.target.value,x]),onInputChange:e.onInputChange}),t.jsx("div",{className:xe({variant:p.variant,size:p.size}),"data-slot":"filters-between",children:p.i18n.to}),t.jsx(P,{className:V("w-16 max-w-full",e.className),field:e,max:e.max,min:e.min,pattern:e.pattern,placeholder:p.i18n.max,step:e.step,type:"number",value:x,onChange:g=>r([d,g.target.value]),onInputChange:e.onInputChange})]})}return t.jsx("div",{className:"flex items-center","data-slot":"filters-item",children:t.jsx(P,{className:V("w-36",e.className),field:e,max:e.type==="number"?e.max:void 0,min:e.type==="number"?e.min:void 0,pattern:e.pattern,placeholder:e.placeholder,step:e.type==="number"?e.step:void 0,type:e.type==="number"?"number":"text",value:a[0]||"",onChange:d=>r([d.target.value]),onInputChange:e.onInputChange})})}if(e.type==="date")return t.jsx(P,{className:V("w-16",e.className),field:e,type:"date",value:a[0]||"",onChange:d=>r([d.target.value]),onInputChange:e.onInputChange});if(e.type==="select"||e.type==="multiselect")return t.jsx(tt,{field:e,values:a,onChange:r});const E=a.length>1,N=((o=e.options)==null?void 0:o.filter(d=>a.includes(d.value)))||[],I=((m=e.options)==null?void 0:m.filter(d=>!a.includes(d.value)))||[];return t.jsxs(_e,{open:h,onOpenChange:d=>{v(d),!d&&e.searchValue===void 0&&setTimeout(()=>f(""),200)},children:[t.jsx(Ie,{className:me({variant:p.variant,size:p.size,cursorPointer:p.cursorPointer}),children:t.jsx("div",{className:"flex w-full min-w-0 items-center gap-1.5",children:e.customValueRenderer?e.customValueRenderer(a,e.options||[]):t.jsxs(t.Fragment,{children:[N.length>0&&t.jsx("div",{className:"flex shrink-0 items-center -space-x-1.5",children:N.slice(0,3).map(d=>t.jsx("div",{children:d.icon},String(d.value)))}),N.length===1?t.jsx("span",{className:"min-w-0 truncate text-accent-foreground",title:N[0].detail?`${N[0].label} - ${N[0].detail}`:N[0].label,children:N[0].label}):N.length>1?`${N.length} ${p.i18n.selectedCount}`:p.i18n.select]})})}),t.jsx(Ve,{className:V("w-36 p-0 data-[state=closed]:!animation-none data-[state=closed]:!duration-0",e.popoverContentClassName),children:t.jsxs(be,{children:[e.searchable!==!1&&t.jsx(ye,{className:"h-[34px] text-sm",placeholder:p.i18n.placeholders.searchField(e.label||""),value:y,onValueChange:C}),t.jsxs(je,{className:"outline-none",children:[e.isLoading?t.jsxs("div",{className:"flex items-center justify-center py-6 text-sm text-muted-foreground",children:[t.jsx(Ee,{className:"mr-2 size-4 animate-spin"}),p.i18n.loading]}):t.jsx(we,{children:p.i18n.noResultsFound}),N.length>0&&t.jsx(G,{children:N.map(d=>t.jsxs(B,{className:"group flex items-center gap-2",onSelect:()=>{r(E?a.filter(x=>x!==d.value):[]),E||v(!1)},children:[d.icon&&d.icon,t.jsx("span",{className:"truncate text-accent-foreground",children:d.label}),t.jsx(te,{className:"ms-auto text-primary"})]},String(d.value)))}),I.length>0&&t.jsxs(t.Fragment,{children:[N.length>0&&t.jsx(ue,{}),t.jsx(G,{children:I.map(d=>t.jsxs(B,{className:"group flex items-center gap-2",value:d.label,onSelect:()=>{if(E){const x=[...a,d.value];if(e.maxSelections&&x.length>e.maxSelections)return;r(x)}else r([d.value]),v(!1)},children:[d.icon&&d.icon,t.jsx("span",{className:"truncate text-accent-foreground",children:d.label}),t.jsx(te,{className:"ms-auto text-primary opacity-0"})]},String(d.value)))})]})]})]})})]})}function dr({filters:e,fields:a,onChange:r,className:u,showAddButton:o=!0,addButtonText:m,addButtonIcon:h,addButtonClassName:v,addButton:y,showClearButton:f=!1,clearButtonText:p,clearButtonIcon:C,clearButtonClassName:E,clearButton:N,onClear:I,variant:d="outline",size:x="md",radius:g="md",i18n:_,showSearchInput:O=!0,cursorPointer:c=!0,trigger:z,allowMultiple:F=!0,popoverContentClassName:$,popoverAlign:K="start",keyboardShortcut:se,onActiveFieldChange:X}){const[Y,L]=n.useState(!1),[U,T]=n.useState(null),[J,D]=n.useState([]);n.useEffect(()=>{X?.(U)},[U,X]),n.useEffect(()=>{if(!se)return;const s=i=>{const b=i.target;b.tagName==="INPUT"||b.tagName==="TEXTAREA"||b.isContentEditable||i.key.toLowerCase()===se.toLowerCase()&&!i.metaKey&&!i.ctrlKey&&!i.altKey&&(i.preventDefault(),L(k=>!k))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[se]),n.useEffect(()=>{Y&&setTimeout(()=>{const s=document.querySelector("[cmdk-input]");if(s)s.focus();else{const i=document.querySelector("[cmdk-root]");i&&i.focus()}},0)},[Y,U,O]);const M={...oe,..._,operators:{...oe.operators,..._?.operators},placeholders:{...oe.placeholders,..._?.placeholders},validation:{...oe.validation,..._?.validation}},Q=n.useMemo(()=>nr(a),[a]),W=U?Q[U]:null,de=n.useCallback((s,i)=>{r(e.map(b=>{if(b.id===s){const k={...b,...i};return(i.operator==="empty"||i.operator==="not_empty")&&(k.values=[]),k}return b}))},[e,r]),he=n.useCallback(s=>{r(e.filter(i=>i.id!==s))},[e,r]),l=n.useCallback(s=>{const i=Q[s];if(i&&i.key){if(i.type==="select"||i.type==="multiselect"){T(i.key);const A=e.find(rt=>rt.field===s),ee=i.type==="multiselect"&&A?A.values:[];D(ee);return}const b=i.defaultOperator||(i.type==="daterange"||i.type==="numberrange"?"between":(i.type==="boolean","is"));let k=[];["text","number","date","email","url","tel","time","datetime"].includes(i.type||"")?k=[""]:i.type==="daterange"?k=["",""]:i.type==="numberrange"?k=[i.min||0,i.max||100]:i.type==="boolean"?k=[!1]:i.type==="time"?k=[""]:i.type==="datetime"&&(k=[""]);const w=Le(s,b,k),R=[...e,w];r(R),L(!1)}},[Q,e,r]),j=n.useCallback((s,i,b=!0)=>{if(!s.key)return;const k=e.find(A=>A.field===s.key);if(k){const A=e.map(ee=>ee.id===k.id?{...ee,values:i}:ee);r(A),D(i),b&&(L(!1),T(null));return}const w=s.defaultOperator||(s.type==="multiselect"?"is_any_of":"is"),R=e.findIndex(A=>A.field===s.key);if(R>=0){const A=[...e];A[R]={...A[R],values:i},r(A)}else{const A=Le(s.key,w,i),ee=[...e,A];r(ee)}b?(L(!1),T(null),D([])):D(i)},[e,r]),S=n.useMemo(()=>Qe(a).filter(i=>!i.key||i.type==="separator"?!1:F?!0:!e.some(b=>b.field===i.key)),[a,e,F]);return t.jsx(Xe.Provider,{value:{variant:d,size:x,radius:g,i18n:M,cursorPointer:c,className:u,showAddButton:o,addButtonText:m,addButtonIcon:h,addButtonClassName:v,addButton:y,showSearchInput:O,trigger:z,allowMultiple:F},children:t.jsxs("div",{className:V(rr({variant:d,size:x}),e.length>0&&"w-full",f&&e.length>0&&"sm:pr-24",u),children:[e.map(s=>{const i=Q[s.field];return i?t.jsxs("div",{className:ar({variant:d}),"data-slot":"filter-item",children:[t.jsxs("div",{className:tr({variant:d,size:x,radius:g}),children:[i.icon,i.label]}),t.jsx(or,{field:i,operator:s.operator,values:s.values,onChange:b=>de(s.id,{operator:b})}),t.jsx(ir,{field:i,operator:s.operator,values:s.values,onChange:b=>de(s.id,{values:b})}),t.jsx(sr,{onClick:()=>he(s.id)})]},s.id):null}),o&&S.length>0&&t.jsxs(_e,{open:Y,onOpenChange:s=>{L(s),s||(T(null),D([]))},children:[t.jsx(Ie,{asChild:!0,children:y||t.jsxs("button",{className:V(Pe({variant:d,size:x,cursorPointer:c,radius:g}),v),title:M.addFilterTitle,type:"button",children:[h||t.jsx(ut,{}),m||M.addFilter]})}),t.jsx(Ve,{align:K,className:V("p-0 data-[state=closed]:!animation-none data-[state=closed]:!duration-0",W?.className||$||"w-[200px]"),children:W?t.jsx(tt,{field:W,inline:!0,values:J,onChange:s=>{const i=W.type==="select";j(W,s,i)},onClose:()=>{L(!1),T(null),D([])}}):t.jsxs(be,{className:"outline-none",tabIndex:O?void 0:0,children:[O&&t.jsx(ye,{className:"h-[34px]",placeholder:M.searchFields}),t.jsxs(je,{className:"outline-none",children:[t.jsx(we,{children:M.noFieldsFound}),a.map((s,i)=>{if(Ye(s)){const k=s.fields.filter(w=>w.type==="separator"||F?!0:!e.some(R=>R.field===w.key));return k.length===0?null:t.jsx(G,{heading:s.group||"Fields",children:k.map((w,R)=>{if(w.type==="separator"){const A=w.key??`${s.group??`group-${i}`}-separator-${R}`;return t.jsx(ue,{},A)}return t.jsxs(B,{onSelect:()=>w.key&&l(w.key),children:[w.icon,t.jsx("span",{children:w.label})]},w.key??`${s.group??`group-${i}`}-field-${R}`)})},s.group||`group-${i}`)}if(Je(s)){const k=s.fields.filter(w=>w.type==="separator"||F?!0:!e.some(R=>R.field===w.key));return k.length===0?null:t.jsx(G,{heading:s.group||"Fields",children:k.map(w=>{if(w.type==="separator"){const R=w.key||`${s.group||`group-${i}`}-separator-${w.label||Math.random()}`;return t.jsx(ue,{},R)}return t.jsxs(B,{onSelect:()=>w.key&&l(w.key),children:[w.icon,t.jsx("span",{children:w.label})]},w.key)})},s.group||`group-${i}`)}const b=s;if(b.type==="separator"){const k=b.key||`flat-separator-${b.label||i}`;return t.jsx(ue,{},k)}return!F&&e.some(k=>k.field===b.key)?null:t.jsxs(B,{onSelect:()=>b.key&&l(b.key),children:[b.icon,t.jsx("span",{children:b.label})]},b.key)})]})]})})]}),f&&e.length>0&&(N||t.jsxs("button",{className:V(Pe({variant:d,size:x,cursorPointer:c,radius:g}),"border-0 bg-transparent hover:bg-transparent hover:text-foreground","sm:absolute sm:right-0 sm:top-0",E),type:"button",onClick:()=>{I?I():r([])},children:[C||t.jsx(De,{}),p||M.clearFilters]}))]})})}const Le=(e,a,r=[])=>({id:`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,field:e,operator:a||"is",values:r});export{dr as F,Le as c};
